<core:FragmentDefinition
        xmlns:core="sap.ui.core"
        xmlns:form="sap.ui.layout.form"
        xmlns="sap.m" >
    <Dialog
            id="createStorageDialog"
            core:require="{handler:'com/sap/dt/cm/baseline/ext/custom/CreateBaseline'}"
             titleAlignment="Start" draggable="true"
            contentWidth="auto" title="{i18n>CreateBaseline}"
            showHeader="true" class="sapUiSizeCompact">
        <content>
            <form:SimpleForm editable="true" layout="ResponsiveGridLayout"
                             labelSpanXL="3"
                             labelSpanL="3"
                             labelSpanM="3"
                             adjustLabelSpan="false"
                             emptySpanXL="4"
                             emptySpanL="4"
                             emptySpanM="4"
                             columnsXL="1"
                             columnsL="1"
                             singleContainerFullSize="false"
                             core:require="{Formatter:'com/sap/dt/cm/baseline/utils/Formatter'}">
                <Label text="{i18n>ConfigPlanID}" required="true" labelFor="configPlanId"/>
                <Input showValueHelp="true" showSuggestion="true" suggest="onSuggestConfigItems" valueHelpRequest=".onValueHelpRequested" id="configPlanId" suggestionItemSelected="onSuggestionItemSelected"
                  value="{localDataModel>/createBaseline/data/configplanId}" valueState="{localDataModel>/createBaseline/valueStateMessage/configplanId}"
                       change="onChangeConfigAndPhaseID"  suggestionRows="{path: '/Configplan_VH'}" maxSuggestionWidth="40%">
                    <customData>
                        <core:CustomData key="Configplan_VH" value="configplanId"/>
                        <core:CustomData key="Configplan_VH" value="configPlanName"/>
                    </customData>
                    <suggestionColumns>
                        <Column>
                            <Label text="{i18n>ConfigPlanID}" />
                        </Column>
                        <Column hAlign="Center">
                            <Label text="{i18n>ConfigPlanName}" />
                        </Column>
                        <Column hAlign="End">
                            <Label text="{i18n>Description}" />
                        </Column>
                    </suggestionColumns>
                    <suggestionRows>
                        <ColumnListItem>
                            <Label text="{configplanId}" />
                            <Label text="{configPlanName}" />
                            <Label text="{description}" />
                        </ColumnListItem>
                    </suggestionRows>
                </Input>

                <Label text="{i18n>LifecyclePhaseID}" required="true" labelFor="lifeCyclePhaseId"/>
                <Input showValueHelp="true" showSuggestion="true" suggest="onSuggestPhaseItems" valueHelpRequest=".onValueHelpRequested" id="lifeCyclePhaseId" suggestionItemSelected="onSuggestionItemSelected"
                   change="onChangeConfigAndPhaseID"  value="{localDataModel>/createBaseline/data/phaseId}" valueState="{localDataModel>/createBaseline/valueStateMessage/phaseId}"
                    editable="{=${localDataModel>/createBaseline/data/configplanId}.length > 0 }"  maxSuggestionWidth="40%"  suggestionRows="{path: '/LifecyclePhase_VH'}">
                    <customData>
                        <core:CustomData key="LifecyclePhase_VH" value="phaseId"/>
                        <core:CustomData key="LifecyclePhase_VH" value="phaseDescription"/>
                    </customData>
                    <suggestionColumns>
                        <Column>
                            <Label text="{i18n>LifecyclePhaseID}" />
                        </Column>
                        <Column hAlign="Center">
                            <Label text="{i18n>Description}" />
                        </Column>
                    </suggestionColumns>
                    <suggestionRows>
                        <ColumnListItem>
                            <Label text="{phaseId}" />
                            <Label text="{phaseDescription}" />
                        </ColumnListItem>
                    </suggestionRows>
                </Input>

                <Label text="{i18n>BaselineProfile}" labelFor="baselineProfileId"/>
                <Input id="baselineProfileId" editable="false" value="{parts:[{path:'localDataModel>/createBaseline/data/baselineProfileName'},{path:'localDataModel>/createBaseline/data/baselineProfileId'}],formatter: 'Formatter.appendText'}"
                       tooltip="{parts:[{path:'localDataModel>/createBaseline/data/baselineProfileName'},{path:'localDataModel>/createBaseline/data/baselineProfileId'}],formatter: 'Formatter.appendText'}">
                    <customData>
                        <core:CustomData key="" value="baselineProfileID"/>
                    </customData>
                </Input>
                <Label text="{i18n>SourceSystem}"  labelFor="sourceSystemId" />
                <Input id="sourceSystemId" editable="false" value="{parts:[{path:'localDataModel>/createBaseline/data/sourceSystemDescription'},{path:'localDataModel>/createBaseline/data/sourceSystem'}],formatter: 'Formatter.appendText'}"
                change="onChangeSourceSystem" tooltip ="{parts:[{path:'localDataModel>/createBaseline/data/sourceSystemDescription'},{path:'localDataModel>/createBaseline/data/sourceSystem'}],formatter: 'Formatter.appendText'}" >
                    <customData>
                        <core:CustomData key="" value="destination"/>
                    </customData>
                </Input>
                <Label text="{i18n>ControlledObject}" required="true" labelFor="controlledObjectId"/>
                <Input showValueHelp="true" showSuggestion="true" valueHelpRequest=".onValueHelpRequested" id="controlledObjectId" suggestionItemSelected="onSuggestionItemSelected"
                 suggest="onSuggestProductItems" editable="{=${localDataModel>/createBaseline/data/sourceSystem}.length > 0 }" value="{localDataModel>/createBaseline/data/productId}" valueState="{localDataModel>/createBaseline/valueStateMessage/productId}"
                   change="onChangeControlledObject" maxSuggestionWidth="40%" suggestionRows="{path: '/ProductsF4',suspended: true}">
                    <customData>
                        <core:CustomData key="ProductsF4" value="productId"/>
                        <core:CustomData key="ProductsF4" value="description"/>
                    </customData>
                    <suggestionColumns>
                        <Column>
                            <Label text="{i18n>Product}" />
                        </Column>
                        <Column hAlign="Center">
                            <Label text="{i18n>Description}" />
                        </Column>
                    </suggestionColumns>
                    <suggestionRows>
                        <ColumnListItem>
                            <Label text="{productId}" />
                            <Label text="{description}" />
                        </ColumnListItem>
                    </suggestionRows>
                </Input>
                <Label text="{i18n>BaselineDescription}" required="true" labelFor="descId"/>
                <Input id="descId" value="{localDataModel>/createBaseline/data/description}"
                       change="onChangeDescription"   valueState="{localDataModel>/createBaseline/valueStateMessage/description}">
                    <customData>
                        <core:CustomData key="" value="description"/>
                    </customData>
                </Input>
            </form:SimpleForm>
        </content>
        <beginButton>
            <Button id="createBaselineFooterBtn" text="{i18n>Create}" type="Emphasized"  press=".onPressCreate" />
        </beginButton>
        <endButton>
            <Button id="cancelBtn" text="{i18n>Cancel}"  press=".onPressCancel" />
        </endButton>
    </Dialog>
</core:FragmentDefinition>